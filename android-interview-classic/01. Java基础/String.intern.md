# String.intern

## 概述

String.intern()用于**将字符串对象添加到字符串常量池中**，如果常量池已经存在该字符串，则返回常量池中的引用，否则将其添加到常量池并返回。

## 详述

`String.intern()` 是 `java.lang.String` 类的一个方法，它用于返回字符串对象的规范表示（canonical representation）。规范表示意味着它返回一个字符串，该字符串具有相同的值，但保证所有包含相同字符序列的字符串对象共享此对象。这样做的主要目的是节省内存空间。

### 工作原理：
1. **如果字符串不在池中**：当调用 `intern()` 方法时，如果字符串不在字符串常量池中，它会将当前字符串添加到池中（在 JDK 7 及以上版本，这个池位于 Java 堆空间中），并返回此字符串的引用。
   
2. **如果字符串已在池中**：如果字符串已经在字符串常量池中存在，它将返回池中存在字符串的引用。

### 用法实例：
```java
String s1 = new String("example"); // 创建一个新的字符串对象
String s2 = s1.intern(); // 获取或创建一个字符串常量池中的字符串
String s3 = "example"; // 由于字符串字面量自动添加到字符串池，这将返回池中的相同字符串

// 下面的比较将返回 true，因为 s2 和 s3 引用的是字符串池中的相同字符串
System.out.println(s2 == s3);
```

### 特点和建议：
- **性能**：在某些场景下，`intern()` 可以提高性能，因为使用 `==` 运算符比较引用通常比使用 `equals()` 方法比较内容更快。但如果你过度使用 `intern()`，也可能对性能产生负面影响，因为它需要在池中查找字符串并可能需要添加新的字符串。
  
- **内存使用**：`intern()` 可以节省内存，因为它允许相同的字符串共享内存。但在另一方面，如果你在大量的长字符串上使用 `intern()`，并且这些字符串长期存在，这可能会消耗更多的内存，因为这些字符串将被添加到字符串池，并且不会被垃圾收集器回收。

因此，在实际使用中，是否使用 `String.intern()` 需要根据具体的使用场景和性能要求来权衡。在大多数情况下，除非你正在处理大量的、重复的字符串，并且确实需要节省内存或提高比较的效率，否则通常不建议过度使用 `intern()`。