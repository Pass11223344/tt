# surfaceè·¨è¿›ç¨‹ä¼ è¾“åŸç†

## ğŸ¤” æ€è€ƒé¢˜

1. æ€ä¹ˆç†è§£surfaceï¼Œå®ƒæ˜¯ä¸€å—bufferå—ï¼Ÿ
   > surfaceä¸æ˜¯bufferï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªèƒ½å¤Ÿç”Ÿæˆbufferçš„binderå¯¹è±¡ï¼Œå°±æ˜¯GraphicBufferProducerã€‚
   >
   > > surfaceç±»ä¼¼äºcanvasï¼Œå°±æ˜¯ä¸€å—ç”»å¸ƒ, surfaceç»˜åˆ¶å®Œæˆåï¼Œéœ€è¦è·¨è¿›ç¨‹æäº¤ç»™ç³»ç»Ÿå»æ˜¾ç¤ºã€‚
2. å¦‚æœæ˜¯ï¼Œsurfaceè·¨è¿›ç¨‹ä¼ é€’æ€ä¹ˆå¸¦ä¸Šè¿™ä¸ªbuffer?
3. å¦‚æœä¸æ˜¯ï¼Œé‚£surfaceè·Ÿbufferåˆæ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ
4. surfaceåˆ°åº•æ˜¯æ€ä¹ˆè·¨è¿›ç¨‹ä¼ é€’çš„ï¼Ÿ
   > SurfaceControlç±»ï¼ŒåŒ…å«äº†GraphicBufferProducerï¼Œå¯ä»¥åˆ›å»ºSurfaceï¼Œè·¨è¿›ç¨‹è¿”å›åº”ç”¨ã€‚``

## Surfaceç±»

``` java
package android.view;

/**
 * å±å¹•åˆæˆç¨‹åºæ­£åœ¨ç®¡ç†çš„åŸå§‹ç¼“å†²åŒºçš„å¥æŸ„ã€‚
 */
public class Surface implements Parcelable {}
```

``` java
@Override
public void writeToParcel(Parcel dest, int flags) {
    // ...
    synchronized (mLock) {
        dest.writeString(mName);
        dest.writeInt(mIsSingleBuffered ? 1 : 0);
        nativeWriteToParcel(mNativeObject, dest);
    }
    // ...
}
```

``` java
public void readFromParcel(Parcel source) {
    synchronized (mLock) {
        mName = source.readString();
        mIsSingleBuffered = source.readInt() != 0;
        setNativeObjectLocked(nativeReadFromParcel(mNativeObject, source));
    }
}
```

## Activityçš„surfaceæ˜¯æ€ä¹ˆè·¨è¿›ç¨‹ä¼ é€’çš„ï¼Ÿ

![](img/d58d2d85.png)

![](img/bc7407ce.png)

![](img/2dcf654d.png)

![](img/54c38fa5.png)

## æ€»ç»“

1. surfaceæœ¬è´¨æ˜¯GraphicBufferProducerï¼Œè€Œä¸æ˜¯buffer
2. surfaceè·¨è¿›ç¨‹ä¼ é€’ï¼Œæœ¬è´¨å°±æ˜¯GraphicBufferProducerçš„ä¼ é€’